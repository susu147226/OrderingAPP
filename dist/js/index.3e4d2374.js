(function(){var e={2691:function(e,t,a){"use strict";var o=a(9242),s=a(3396);function n(e,t,a,o,n,i){const l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(l,null,{default:(0,s.w5)((({Component:e})=>[((0,s.wg)(),(0,s.j4)(s.Ob,{include:n.keepAliveList},[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))],1032,["include"]))])),_:1})}const i=["Home","ChooseFood","Order","Category","My"];var l=i,r={name:"App",data(){return{keepAliveList:l}}},d=a(89);const u=(0,d.Z)(r,[["render",n]]);var p=u,c=a(2483),m=a(65),f=a(2415),g=a(680),h=(0,m.MT)({state:{loginUserInfo:null,token:null},mutations:{setLoginUserInfo(e,t){e.loginUserInfo=t},setToken(e,t){e.token=t}},actions:{setLoginUserInfo({commit:e},t){e("setLoginUserInfo",t)},setToken({commit:e},t){e("setToken",t)},setLogOut({commit:e}){e("setLoginUserInfo",null),e("setToken",null)}},getters:{loginUserInfo(e){return e.loginUserInfo},token(e){return e.token}},plugins:[(0,f.Z)({storage:{getItem:e=>g.Z.get(e),setItem:(e,t)=>g.Z.set(e,t,{expires:30}),removeItem:e=>g.Z.remove(e)}})]}),w=a(7139);const _=e=>((0,s.dD)("data-v-fa8dd766"),e=e(),(0,s.Cn)(),e),I={class:"content-box"},y={class:"tab-bar"},x=["onClick"],v=_((()=>(0,s._)("span",{class:"iconfont icon-dropbox"},null,-1))),L=["onClick"],b=_((()=>(0,s._)("span",{class:"iconfont icon-layout-fill"},null,-1))),C=["onClick"],k=_((()=>(0,s._)("span",{class:"iconfont icon-tag-fill"},null,-1))),U=["onClick"],D=_((()=>(0,s._)("span",{class:"iconfont icon-user"},null,-1)));function W(e,t,a,o,n,i){const l=(0,s.up)("router-view"),r=(0,s.up)("router-link"),d=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(d,{class:"home-page"},{default:(0,s.w5)((()=>[(0,s._)("div",I,[(0,s.Wm)(l,null,{default:(0,s.w5)((({Component:e})=>[((0,s.wg)(),(0,s.j4)(s.Ob,null,[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))],1024))])),_:1})]),(0,s._)("ul",y,[(0,s.Wm)(r,{to:{name:"ChooseFood"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[v,(0,s.Uk)(" 点餐 ")],10,x)])),_:1}),(0,s.Wm)(r,{to:{name:"Order"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[b,(0,s.Uk)(" 订单 ")],10,L)])),_:1}),(0,s.Wm)(r,{to:{name:"Category"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[k,(0,s.Uk)(" 分类 ")],10,C)])),_:1}),(0,s.Wm)(r,{to:{name:"My"},custom:""},{default:(0,s.w5)((({navigate:e,isActive:t})=>[(0,s._)("li",{onClick:e,class:(0,w.C_)({selected:t})},[D,(0,s.Uk)(" 我的 ")],10,U)])),_:1})])])),_:1})}var B={name:"Home"};const S=(0,d.Z)(B,[["render",W],["__scopeId","data-v-fa8dd766"]]);var A=S;const F={class:"flex-1 overflow-auto pb-[var(--van-action-bar-height)]",ref:"foodInfoContent"},V={class:"w-full h-[230px]"},P={crossorigin:"anonymous",class:"w-full h-full object-cover",alt:""},O={class:"text-[14px] leading-[24px] box-border p-[5px] border-0 border-b border-dashed border-gray-500"},j=(0,s._)("span",{class:"font-bold"},"名称：",-1),z=(0,s._)("span",{class:"font-bold"},"价格：",-1),R=(0,s._)("span",{class:"font-bold"},"分类：",-1),M={class:"indent-[2em]"},T={class:"p-[5px]"},$=(0,s._)("div",{class:"text-primaryColor font-bold text-[18px]"},"最新评论",-1),E={class:"flex flex-row py-2 items-center"},q={crossorigin:"anonymous",class:"w-[40px] h-[40px] rounded-full",alt:""},Z={class:"flex-1 ml-2"},N={class:"h-[40px] flex flex-col justify-between"},H={class:"text-[12px] text-gray-600"},Y={class:"text-[14px] leading-[24px]"};function G(e,t,a,n,i,l){const r=(0,s.up)("Icon"),d=(0,s.up)("title-bar"),u=(0,s.up)("Rate"),p=(0,s.up)("List"),c=(0,s.up)("ActionBarIcon"),m=(0,s.up)("ActionBarButton"),f=(0,s.up)("ActionBar"),g=(0,s.up)("my-loading"),h=(0,s.up)("page-view"),_=(0,s.up)("ShareSheet"),I=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(h,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{"show-back":!0},{menu:(0,s.w5)((()=>[(0,s.Wm)(r,{name:"share-o",size:22,onClick:t[0]||(t[0]=e=>i.showShare=!0)})])),default:(0,s.w5)((()=>[(0,s.Uk)((0,w.zw)(i.foodDetail?.food_name)+" ",1)])),_:1}),(0,s.Wm)(g,{isLoading:!i.foodDetail},{default:(0,s.w5)((()=>[(0,s._)("div",F,[(0,s.Wm)(p,{loading:i.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>i.isLoading=e),finished:l.finished,"finished-text":"没有更多了",onLoad:l.loadNextPageComment},{default:(0,s.w5)((()=>[(0,s._)("div",V,[(0,s.wy)((0,s._)("img",P,null,512),[[I,l.baseURL+i.foodDetail.food_img]])]),(0,s._)("ul",O,[(0,s._)("li",null,[j,(0,s.Uk)((0,w.zw)(i.foodDetail.food_name),1)]),(0,s._)("li",null,[z,(0,s.Uk)("￥ "+(0,w.zw)(i.foodDetail.price),1)]),(0,s._)("li",null,[R,(0,s.Uk)((0,w.zw)(i.foodDetail.categoryInfo.category_name),1)]),(0,s._)("li",M,(0,w.zw)(i.foodDetail.food_desc),1)]),(0,s._)("div",T,[$,(0,s.Wm)(o.W3,{"enter-active-class":"animate__animated animate__slideInUp"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.commentInfoList,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"comment-item",key:e.id},[(0,s._)("div",E,[(0,s.wy)((0,s._)("img",q,null,512),[[I,l.baseURL+e.userInfo.user_photo]]),(0,s._)("div",Z,(0,w.zw)(e.userInfo.nickName),1),(0,s._)("div",N,[(0,s._)("div",H,(0,w.zw)(l.formatDateTime(e.create_time)),1),(0,s.Wm)(u,{modelValue:e.star,"onUpdate:modelValue":t=>e.star=t,color:"#ffd21e","void-icon":"star","void-color":"#eee"},null,8,["modelValue","onUpdate:modelValue"])])]),(0,s._)("div",Y,(0,w.zw)(e.comment_text),1)])))),128))])),_:1})])])),_:1},8,["loading","finished","onLoad"])],512),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{icon:"cart-o",text:"购物车",badge:i.totalCount},null,8,["badge"]),(0,s.Wm)(c,{icon:"balance-o",text:"金额",badge:i.totalPrice},null,8,["badge"]),(0,s.Wm)(c,{icon:"star",text:"已收藏",color:"#ff5000"}),(0,s.Wm)(m,{loading:i.isAddtoShopCarting,type:"warning",onClick:l.addToShopCart,text:"加入购物车"},null,8,["loading","onClick"]),(0,s.Wm)(m,{type:"danger",text:"立即购买",onClick:l.toShopCartList},null,8,["onClick"])])),_:1})])),_:1},8,["isLoading"])])),_:1}),(0,s.Wm)(_,{show:i.showShare,"onUpdate:show":t[2]||(t[2]=e=>i.showShare=e),title:"立即分享给好友",options:i.shareOptions,onSelect:l.shareOptionSelect},null,8,["show","options","onSelect"])],64)}a(7658);var K=a(1835),Q=a(6431),J=a(9733),X=a(2558),ee=a(3061),te=a(5904),ae=a(9357),oe=a(5943),se=a(3649),ne=a(6318),ie=a(70);const le=ie.ZP.create({baseURL:"http://www.softeem.xin:9544",timeout:5e3});le.interceptors.request.use((e=>(e.headers["softeem_ele_client_token"]=h.getters.token,e))),le.interceptors.response.use((e=>"success"===e.data.status?Promise.resolve(e.data.data):(console.log(e.data),Promise.reject(e.data))),(e=>{if(console.log(e),403!==e.response.status)return Promise.reject(e);ao.replace({name:"Login"})}));var re=le;const de={getListByPage({pageIndex:e,category_name:t}){return re.get("/categoryInfo/getListByPage",{params:{pageIndex:e,category_name:t}})},getAllList(){return re.get("/categoryInfo/getAllList")}};var ue=de;const pe={getListByPage({pageIndex:e,food_name:t,category_name:a}){return re.get("/foodInfo/getListByPage",{params:{pageIndex:e,food_name:t,category_name:a}})},getListByCid(e){return re.get("/foodInfo/getListByCid",{params:{cid:e}})},findById(e){return re.get("/foodInfo/findById",{params:{id:e}})}};var ce=pe;const me={getCommentInfoListByFid({fid:e,pageIndex:t}){return re.get("/commentInfo/getCommentInfoListByFid",{params:{fid:e,pageIndex:t}})}};var fe=me;const ge={uploadUserPhoto(e){let t=new FormData;return t.append("user_photo",e),re.post("/userInfo/uploadUserPhoto",t,{headers:{"Content-Type":"multipart/form-data"}})},add({nickName:e,user_sex:t,user_phone:a,user_email:o,user_photo:s,password:n}){return re.post("/userInfo/add",{nickName:e,user_sex:t,user_phone:a,user_email:o,user_photo:s,password:n})},checkLogin({zh:e,password:t}){return re.post("/userInfo/checkLogin",{zh:e,password:t})}};var he=ge;const we={getMyShopCartTotalInfo(){return re.get("/shopCart/getMyShopCartTotalInfo")},addToShopCart({fid:e,count:t}){return re.post("/shopCart/addToShopCart",{fid:e,count:t})},getShopCartListByPage({pageIndex:e}){return re.get("/shopCart/getListByPage",{params:{pageIndex:e}})},deleteMyShopCartFoodById(e){return re.get("/shopCart/deleteMyShopCartFoodById",{params:{id:e}})}};var _e=we;const Ie={getListByParentId(e){return re.get("/area/getListByParentId",{params:{parentId:e}})},getAllList(){return re.get("http://www.softeem.xin:9544/area/getAllList")}};var ye=Ie;const xe={addAddress({address:e,phone:t,person_name:a,tag:o}){return re.post("/addressInfo/addAddress",{address:e,phone:t,person_name:a,tag:o})},getMyAddressInfoList(){return re.get("/addressInfo/getMyAddressInfoList")},deleteById(e){return re.get("/addressInfo/deleteById",{params:{id:e}})},findById(e){return re.get("/addressInfo/findById",{params:{id:e}})},update({id:e,address:t,phone:a,person_name:o,tag:s}){return re.post("/addressInfo/update",{id:e,address:t,phone:a,person_name:o,tag:s})}};var ve=xe;const Le={submitOrder(e){return re.post("/orderInfo/submitOrder",e,{headers:{"Content-Type":"application/json"}})},getMyOrderListByPage({pageIndex:e}){return re.get("/orderInfo/getMyOrderListByPage",{params:{pageIndex:e}})}};var be=Le,Ce={categoryInfo:ue,foodInfo:ce,commentInfo:fe,userInfo:he,shopCart:_e,area:ye,addressInfo:ve,orderInfo:be},ke=a(5743),Ue=a.n(ke);const De=(e,t="YYYY-MM-DD HH:mm:ss")=>{let a=Ue()(e);return a.isValid()?a.format(t):""};var We=a(7071),Be=a(8385),Se=a(2269),Ae=a.n(Se),Fe={name:"FoodDetail",inject:["baseURL"],data(){return{foodDetail:null,star:3,fid:null,pageIndex:1,pageCount:0,commentInfoList:[],isLoading:!1,shareOptions:[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}],showShare:!1,totalPrice:0,totalCount:0,isAddtoShopCarting:!1}},async created(){let e=this.$route.params.id;this.fid=e,await this.findById(e),await this.getCommentInfoListByFid({fid:e,pageIndex:this.pageIndex}),this.loginUserInfo&&await this.getMyShopCartTotalInfo()},computed:{...(0,m.Se)(["loginUserInfo"]),finished(){return this.pageIndex>=this.pageCount}},methods:{async findById(e){let t=await Ce.foodInfo.findById(e);this.foodDetail=t},async getCommentInfoListByFid({fid:e,pageIndex:t}){this.isLoading=!0;let a=await Ce.commentInfo.getCommentInfoListByFid({fid:e,pageIndex:t});this.pageIndex=a.pageIndex,this.pageCount=a.pageCount,this.commentInfoList.push(...a.listData),this.isLoading=!1},loadNextPageComment(){this.pageIndex++,this.getCommentInfoListByFid({fid:this.fid,pageIndex:this.pageIndex})},formatDateTime:De,async shareOptionSelect(e,t){2===t?this.shareFoodLink():3===t?this.shareFoodPost():4===t&&this.shareQRCode(),this.showShare=!1},shareQRCode(){Be.toDataURL(location.href).then((e=>{(0,K.e)({images:[e],onClose(){Q.V.confirm({title:"请确定",message:"要将分享二维码保存在本地吗？"}).then((()=>{let t=document.createElement("a");t.href=e,t.download="分享二维码.png",t.click()})).catch((()=>{}))}})}))},async shareFoodPost(){let e=new Audio;e.src=a(9472),e.play();let t=await Ae()(this.$refs.foodInfoContent,{useCORS:!0}),o=t.getContext("2d");o.save();let s=parseInt(t.style.width)/2,n=parseInt(t.style.height)/2;o.translate(s,n),o.fillStyle="red",o.font="36px 微软雅黑",o.textAlign="center",o.textBaseline="top",o.rotate(-Math.PI/4);let i=o.createLinearGradient(-s,-n,t.width,t.height);i.addColorStop(0,"red"),i.addColorStop(.5,"gold"),i.addColorStop(1,"blue"),o.fillStyle=i,o.fillText("食客斋·美食分享",0,0),o.restore();let l=await Be.toDataURL(location.href),r=new Image;r.src=l,r.onload=()=>{o.drawImage(r,10,50,100,100);let e=t.toDataURL("image/png");(0,K.e)({images:[e],className:"animate__animated animate__bounceIn"});let a=document.createElement("a");a.href=e,a.download=`${this.foodDetail.food_name}海报.png`,a.click()}},shareFoodLink(){const{toClipboard:e}=(0,We.Z)();e(`嗨，我发现了一个非常好吃的东西，现在分享给你看一下。${location.href}`).then((()=>{J.F.success("复制成功")}))},async getMyShopCartTotalInfo(){let e=await Ce.shopCart.getMyShopCartTotalInfo();this.totalPrice=e.totalPrice,this.totalCount=e.totalCount},async addToShopCart(){this.loginUserInfo?(this.isAddtoShopCarting=!0,await Ce.shopCart.addToShopCart({fid:this.foodDetail.id,count:1}),J.F.success("加入购物车成功"),await this.getMyShopCartTotalInfo(),this.isAddtoShopCarting=!1):Q.V.confirm({title:"提示",message:"你还没有登录，现在去登录吗?"}).then((()=>{this.$router.push({name:"Login"})})).catch((()=>{}))},toShopCartList(){this.loginUserInfo?this.$router.push({name:"ShopCartList"}):Q.V.confirm({title:"提示",message:"你还没有登录，现在去登录吗?"}).then((()=>{this.$router.push({name:"Login"})})).catch((()=>{}))}},components:{ActionBar:X.o,ActionBarIcon:ee.M,ActionBarButton:te.Z,Rate:ae.j,List:oe.a,Icon:se.J,ShareSheet:ne.S}};const Ve=(0,d.Z)(Fe,[["render",G]]);var Pe=Ve;const Oe={class:"flex-1 overflow-auto bg-gray-100"},je={class:"p-5"},ze={class:"text-[12px] text-center py-5"};function Re(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("router-link"),p=(0,s.up)("CellGroup"),c=(0,s.up)("Form"),m=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(m,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1}),(0,s._)("div",Oe,[(0,s.Wm)(c,{class:"mt-5",ref:"loginFormEl"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:n.loginUser.zh,"onUpdate:modelValue":t[0]||(t[0]=e=>n.loginUser.zh=e),label:"用户名",placeholder:"请输入用户名",rules:[{pattern:/\d{11}/,message:"用户名是一个手机号",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{type:"password",modelValue:n.loginUser.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.loginUser.password=e),label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"密码不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s._)("div",je,[(0,s.Wm)(d,{disabled:n.isSubmiting,"loading-text":"正在登录中","loading-type":"spinner",loading:n.isSubmiting,onClick:i.checkLogin,type:"primary",round:"",block:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1},8,["disabled","loading","onClick"])]),(0,s._)("div",ze,[(0,s.Uk)(" 还没有账号，去"),(0,s.Wm)(u,{class:"text-primaryColor",to:{name:"Register"}},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1})])])),_:1})])),_:1},512)])])),_:1})}var Me=a(6944),Te=a(3548),$e=a(5331),Ee=a(9545),qe={name:"Login",data(){return{loginUser:{zh:"15988886666",password:"123456789"},isSubmiting:!1}},methods:{...(0,m.nv)(["setLoginUserInfo","setToken"]),checkLogin(){this.$refs.loginFormEl.validate().then((()=>{console.log("验证通过"),this.submitLoginForm()})).catch((()=>{console.log("验证没有通过")}))},async submitLoginForm(){this.isSubmiting=!0;try{let e=await Ce.userInfo.checkLogin(this.loginUser);J.F.success("登录成功"),this.setLoginUserInfo(e.loginUserInfo),this.setToken(e.token),this.$router.back()}catch(e){J.F.fail("登录失败")}finally{this.isSubmiting=!1}}},components:{Form:Me.l,Field:Te.g,CellGroup:$e.T,Button:Ee.z}};const Ze=(0,d.Z)(qe,[["render",Re]]);var Ne=Ze;const He={class:"flex-1 overflow-auto"},Ye=["src"];function Ge(e,t,a,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("SwipeItem"),u=(0,s.up)("Swipe"),p=(0,s.up)("food-item"),c=(0,s.up)("List"),m=(0,s.up)("Skeleton"),f=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(f,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" 食味斋")])),_:1}),(0,s._)("div",He,[(0,s.Wm)(m,{row:8,loading:i.isFirstLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{loading:i.isLoading,"onUpdate:loading":t[0]||(t[0]=e=>i.isLoading=e),finished:l.finished,"finished-text":"没有更多了",onLoad:l.loadNextPage,"loading-text":"正在加载下一页数据"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"h-[200px]",autoplay:5e3},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.swiperImage,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e},{default:(0,s.w5)((()=>[(0,s._)("img",{src:l.baseURL+e,class:"w-full h-full object-cover",alt:""},null,8,Ye)])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(o.W3,{"enter-active-class":"animate__animated animate__slideInUp"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.listData,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,"item-data":e},null,8,["item-data"])))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["loading"])])])),_:1})}var Ke=a(8620),Qe=a(8101),Je=a(9345);const Xe={class:"flex-1 overflow-auto text-[12px] flex flex-col justify-between ml-[4px]"},et={class:"text-[18px] font-bold"},tt={class:"text-red-500"},at=(0,s._)("div",{class:"absolute right-[5px] top-[5px] rounded-full p-[2px]"},[(0,s._)("span",{class:"iconfont icon-heart text-[24px] text-red-600"})],-1);function ot(e,t,a,n,i,l){const r=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)("div",{onClick:t[1]||(t[1]=(...e)=>l.toFoodDetail&&l.toFoodDetail(...e)),class:"bg-white h-[90px] relative flex flex-row box-border p-[4px] border-0 border-b border-solid border-gray-200"},[(0,s.wy)((0,s._)("img",{class:"w-[110px] h-full",alt:"",onClick:t[0]||(t[0]=(0,o.iM)((e=>l.showImage(l.baseURL+a.itemData.food_img)),["stop"]))},null,512),[[r,l.baseURL+a.itemData.food_img]]),(0,s._)("ul",Xe,[(0,s._)("li",et,(0,w.zw)(a.itemData.food_name),1),(0,s._)("li",tt,"月售："+(0,w.zw)(a.itemData.saleCount),1),(0,s._)("li",null,"价格："+(0,w.zw)(a.itemData.price),1),(0,s._)("li",null,"分类："+(0,w.zw)(a.itemData.categoryInfo.category_name),1)]),at])}var st=a(3),nt={name:"FoodItem",props:["itemData"],inject:["baseURL"],methods:{showImage(e){(0,K.e)([e])},toFoodDetail(){this.$router.push({name:"FoodDetail",params:{id:this.itemData.id}})}},components:{VanImage:st.E}};const it=(0,d.Z)(nt,[["render",ot]]);var lt=it,rt={name:"ChooseFood",inject:["baseURL"],data(){return{pageIndex:1,listData:[],pageCount:0,swiperImage:[],isLoading:!1,isFirstLoading:!0}},created(){this.getListByPage()},methods:{async getListByPage(e=1){this.isLoading=!0;try{let t=await Ce.foodInfo.getListByPage({pageIndex:e});console.log(t),this.pageIndex=t.pageIndex,this.listData.push(...t.listData),this.pageCount=t.pageCount,1==e&&(this.swiperImage=t.listData.slice(0,4).map((e=>e.food_img))),this.isFirstLoading=!1}catch(t){}finally{this.isLoading=!1}},loadNextPage(){this.pageIndex++,this.getListByPage(this.pageIndex)}},computed:{finished(){return this.pageIndex>=this.pageCount}},components:{Swipe:Ke.o,SwipeItem:Qe.j,FoodItem:lt,List:oe.a,Skeleton:Je.O}};const dt=(0,d.Z)(rt,[["render",Ge]]);var ut=dt;const pt=e=>((0,s.dD)("data-v-6ff09baf"),e=e(),(0,s.Cn)(),e),ct={class:"flex-1 overflow-auto bg-gray-100"},mt={class:"text-[14px] leading-[28px]"},ft=pt((()=>(0,s._)("span",{class:"font-bold"},"订单编号：",-1))),gt=pt((()=>(0,s._)("span",{class:"font-bold"},"订单时间：",-1))),ht=pt((()=>(0,s._)("span",{class:"font-bold"},"菜品总数：",-1))),wt=pt((()=>(0,s._)("span",{class:"font-bold"},"订单金额：",-1))),_t=pt((()=>(0,s._)("span",{class:"font-bold"},"订单状态：",-1))),It=pt((()=>(0,s._)("p",{class:"text-[14px] font-bold"},"订单列表",-1))),yt=pt((()=>(0,s._)("ul",{class:"text-[12px] food-list"},[(0,s._)("li",null,[(0,s._)("span",null,"1.南瓜八宝粥 x 28.00"),(0,s._)("span",null,"1")])],-1))),xt={class:"flex flex-row justify-between"},vt={class:"py-4 flex flex-row justify-start"},Lt={class:"py-4 flex flex-row justify-end"},bt={key:1,class:"text-center py-10 text-[14px]"};function Ct(e,t,a,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("Step"),u=(0,s.up)("Steps"),p=(0,s.up)("Button"),c=(0,s.up)("List"),m=(0,s.up)("PullRefresh"),f=(0,s.up)("my-loading"),g=(0,s.up)("router-link"),h=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(h,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)("订单")])),_:1}),(0,s._)("div",ct,[e.loginUserInfo?((0,s.wg)(),(0,s.j4)(f,{key:0,isLoading:i.isFirstLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:i.isLoading,"onUpdate:modelValue":t[0]||(t[0]=e=>i.isLoading=e),onRefresh:l.refreshData},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"finished-text":"没有更多数据了","loading-text":"正在加载数据",finished:i.pageIndex>=i.pageCount,loading:i.isLoading,onLoad:l.loadNextPageOrder},{default:(0,s.w5)((()=>[(0,s.Wm)(o.W3,{"enter-active-class":"animate__animated animate__slideInUp"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.listData,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"bg-white box-border p-5 my-4",key:e.id},[(0,s._)("ul",mt,[(0,s._)("li",null,[ft,(0,s.Uk)((0,w.zw)(e.id),1)]),(0,s._)("li",null,[gt,(0,s.Uk)((0,w.zw)(l.formatDateTime(e.submit_time)),1)]),(0,s._)("li",null,[ht,(0,s.Uk)((0,w.zw)(e.orderDetailList.length),1)]),(0,s._)("li",null,[wt,(0,s.Uk)("￥ "+(0,w.zw)(e.order_money),1)]),(0,s._)("li",null,[_t,(0,s.Uk)((0,w.zw)(e.order_status),1)])]),(0,s.Wm)(u,{ref_for:!0,ref:"step",active:i.orderStatusMap.indexOf(e.order_status)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("未付款")])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("已付款")])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("已发货")])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("交易完成")])),_:1})])),_:2},1032,["active"]),It,yt,(0,s._)("div",xt,[(0,s._)("div",vt,["已付款"===e.order_status?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"danger",size:"mini",plain:"",onClick:a=>l.dePayPrice(e,t)},{default:(0,s.w5)((()=>[(0,s.Uk)("退款")])),_:2},1032,["onClick"])):(0,s.kq)("",!0),"交易成功"===e.order_status?((0,s.wg)(),(0,s.j4)(p,{key:1,type:"success",size:"mini",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("分享")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",Lt,["已发货"===e.order_status?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"primary",size:"mini",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("评价")])),_:1})):(0,s.kq)("",!0),"未付款"===e.order_status?((0,s.wg)(),(0,s.j4)(p,{key:1,type:"primary",onClick:a=>l.payPrice(e,t),size:"mini",plain:""},{default:(0,s.w5)((()=>[(0,s.Uk)("付款")])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])])])))),128))])),_:1})])),_:1},8,["finished","loading","onLoad"])])),_:1},8,["modelValue","onRefresh"])])),_:1},8,["isLoading"])):((0,s.wg)(),(0,s.iD)("p",bt,[(0,s.Uk)(" 你还没有登录，请先去 "),(0,s.Wm)(g,{class:"text-primaryColor",to:{name:"Login"}},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1})]))])])),_:1})}var kt=a(2346),Ut=a(7296),Dt=a(1441),Wt={name:"Order",data(){return{isFirstLoading:!0,isLoading:!1,pageIndex:1,pageCount:0,listData:[],orderStatusMap:["未付款","已付款","已发货","交易完成"]}},computed:{...(0,m.Se)(["loginUserInfo"])},created(){this.loginUserInfo&&this.getMyOrderListByPage({pageIndex:this.pageIndex})},activated(){this.loginUserInfo&&this.isFirstLoading&&this.getMyOrderListByPage({pageIndex:this.pageIndex})},methods:{formatDateTime:De,async getMyOrderListByPage({pageIndex:e,isRefresh:t=!1}){this.isLoading=!0;let a=await Ce.orderInfo.getMyOrderListByPage({pageIndex:e});this.pageIndex=a.pageIndex,this.pageCount=a.pageCount,t?this.listData=a.listData:this.listData.push(...a.listData),this.isLoading=!1,this.isFirstLoading=!1},loadNextPageOrder(){this.pageIndex++,this.getMyOrderListByPage({pageIndex:this.pageIndex})},refreshData(){this.pageIndex=1,this.getMyOrderListByPage({pageIndex:this.pageIndex,isRefresh:!0})},payPrice(e,t){this.listData[t].order_status="已付款"},dePayPrice(e,t){this.listData[t].order_status="未付款"}},components:{Steps:kt.R,Step:Ut.h,Button:Ee.z,List:oe.a,PullRefresh:Dt.I}};const Bt=(0,d.Z)(Wt,[["render",Ct],["__scopeId","data-v-6ff09baf"]]);var St=Bt;const At={key:0,class:"flex justify-center py-[10px]"},Ft={key:1,class:"flex-1 overflow-auto flex flex-row"},Vt={class:"w-[90px] h-full overflow-auto"},Pt={class:"flex-1 overflow-auto"},Ot={class:"text-primaryColor text-[18px] font-bold py-3px]"},jt=["onClick"],zt={class:"w-[110px] h-full",alt:""},Rt={class:"flex-1 overflow-auto text-[12px] flex flex-col justify-between ml-[4px]"},Mt={class:"text-[18px] font-bold"},Tt=(0,s._)("div",{class:"absolute right-[5px] top-[5px] rounded-full p-[2px]"},[(0,s._)("span",{class:"iconfont icon-heart text-[24px] text-red-600"})],-1);function $t(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Loading"),d=(0,s.up)("SidebarItem"),u=(0,s.up)("Sidebar"),p=(0,s.up)("IndexAnchor"),c=(0,s.up)("Empty"),m=(0,s.up)("IndexBar"),f=(0,s.up)("page-view"),g=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.j4)(f,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("分类")])),_:1}),n.isLoading?((0,s.wg)(),(0,s.iD)("div",At,[(0,s.Wm)(r,{"text-color":"#0094ff"},{default:(0,s.w5)((()=>[(0,s.Uk)("正在加载数据···")])),_:1})])):((0,s.wg)(),(0,s.iD)("div",Ft,[(0,s._)("div",Vt,[(0,s.Wm)(u,{class:"w-full",modelValue:n.selectedIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedIndex=e),onChange:i.sideBarChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.allCategoryList,(e=>((0,s.wg)(),(0,s.j4)(d,{title:e.category_name,key:e.id},null,8,["title"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,s._)("div",Pt,[(0,s.Wm)(m,{"index-list":[e.indexList],ref:"rightIndexBar",sticky:!1,onChange:i.indexBarChange},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.allCategoryList,((t,a)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t.id},[(0,s.Wm)(p,{index:a},{default:(0,s.w5)((()=>[(0,s._)("div",Ot,(0,w.zw)(t.category_name),1)])),_:2},1032,["index"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.foodInfoList,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,onClick:a=>e.$router.push({name:"FoodDetail",params:{id:t.id}}),class:"bg-white h-[90px] relative flex flex-row box-border p-[4px] border-0 border-b border-solid border-gray-200"},[(0,s.wy)((0,s._)("img",zt,null,512),[[g,i.baseURL+t.food_img]]),(0,s._)("ul",Rt,[(0,s._)("li",Mt,(0,w.zw)(t.food_name),1),(0,s._)("li",null,"价格："+(0,w.zw)(t.price),1)]),Tt],8,jt)))),128)),t.foodInfoList.length<=0?((0,s.wg)(),(0,s.j4)(c,{key:0,"image-size":"50px",description:"当前分类无菜品信息"})):(0,s.kq)("",!0)],64)))),128))])),_:1},8,["index-list","onChange"])])]))])),_:1})}var Et=a(4930),qt=a(4575),Zt=a(6388),Nt=a(6132),Ht=a(2229),Yt=a(1719),Gt={name:"Category",inject:["baseURL"],data(){return{selectedIndex:0,allCategoryList:[],isLoading:!0}},created(){this.getAllCategoryList()},methods:{async getAllCategoryList(){let e=await Ce.categoryInfo.getAllList();this.allCategoryList=e,this.isLoading=!1},sideBarChange(e){console.log(e),this.$refs.rightIndexBar.scrollTo(e)},indexBarChange(e){this.selectedIndex=e}},components:{Sidebar:Et.Y,SidebarItem:qt.R,IndexBar:Zt._,IndexAnchor:Nt.R,Loading:Ht.g,Empty:Yt.H}};const Kt=(0,d.Z)(Gt,[["render",$t]]);var Qt=Kt,Jt=a.p+"img/user.e92c45f9.jpg";const Xt={class:"flex-1 overflow-auto"},ea={class:"flex flex-col justify-center items-center h-[160px] bg-gradient-to-b from-blue-200 to-purple-300"},ta={key:0,class:"w-[80px] h-[80px] rounded-full",alt:""},aa={key:1,src:Jt,class:"w-[80px] h-[80px] rounded-full",alt:""},oa={key:0},sa={key:1};function na(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Cell"),d=(0,s.up)("CellGroup"),u=(0,s.up)("Empty"),p=(0,s.up)("page-view"),c=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.j4)(p,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,null,{default:(0,s.w5)((()=>[(0,s.Uk)("我的")])),_:1}),(0,s._)("div",Xt,[(0,s._)("div",ea,[e.loginUserInfo?(0,s.wy)(((0,s.wg)(),(0,s.iD)("img",ta,null,512)),[[c,i.baseURL+e.loginUserInfo.user_photo]]):((0,s.wg)(),(0,s.iD)("img",aa)),(0,s._)("p",{onClick:t[0]||(t[0]=t=>e.$router.push({name:"Login"})),class:"text-[14px] text-gray-700 mt-[10px]"},[e.loginUserInfo?((0,s.wg)(),(0,s.iD)("span",oa,"欢迎登录："+(0,w.zw)(e.loginUserInfo.nickName),1)):((0,s.wg)(),(0,s.iD)("span",sa,"点击去登录"))])]),e.loginUserInfo?((0,s.wg)(),(0,s.j4)(d,{key:0,title:"操作信息"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{icon:"shopping-cart-o",title:"购物车列表","is-link":!0,to:{name:"ShopCartList"}}),(0,s.Wm)(r,{icon:"shop-o",title:"我的订单","is-link":!0,to:{name:"Order"}}),(0,s.Wm)(r,{icon:"location-o",title:"收货地址","is-link":!0,to:{name:"AddressInfoList"}}),(0,s.Wm)(r,{icon:"guide-o",title:"退出登录",onClick:i.logOut,"is-link":!0},null,8,["onClick"])])),_:1})):((0,s.wg)(),(0,s.j4)(u,{key:1,description:"未登录,无操作信息"}))])])),_:1})}var ia=a(4250),la={name:"My",inject:["baseURL"],computed:{...(0,m.Se)(["loginUserInfo"])},methods:{...(0,m.nv)(["setLogOut"]),logOut(){Q.V.confirm({title:"请确定",message:"你确定要退出登录吗"}).then((()=>{this.setLogOut()})).catch((()=>{}))}},components:{Cell:ia.b,CellGroup:$e.T,Empty:Yt.H}};const ra=(0,d.Z)(la,[["render",na]]);var da=ra;const ua={class:"flex-1 overflow-auto bg-gray-100"},pa={class:"p-5"};function ca(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Radio"),u=(0,s.up)("RadioGroup"),p=(0,s.up)("Uploader"),c=(0,s.up)("Button"),m=(0,s.up)("CellGroup"),f=(0,s.up)("Form"),g=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(g,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("注册")])),_:1}),(0,s._)("div",ua,[(0,s.Wm)(f,{class:"my-5",ref:"registerFormEl"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{label:"昵称",placeholder:"请输入昵称",modelValue:n.userInfo.nickName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.userInfo.nickName=e),rules:[{required:!0,message:"昵称不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"密码",placeholder:"请输入密码",modelValue:n.userInfo.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.userInfo.password=e),rules:[{required:!0,message:"密码不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{label:"确认密码",placeholder:"请输入确认密码",modelValue:n.userInfo.confirmPwd,"onUpdate:modelValue":t[2]||(t[2]=e=>n.userInfo.confirmPwd=e),rules:[{required:!0,message:"确认密码不能为空",trigger:"onBlur"},{validator:i.validatePwd,message:"密码不符合要求",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"性别"},{input:(0,s.w5)((()=>[(0,s.Wm)(u,{modelValue:n.userInfo.user_sex,"onUpdate:modelValue":t[3]||(t[3]=e=>n.userInfo.user_sex=e),direction:"horizontal"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"男"},{default:(0,s.w5)((()=>[(0,s.Uk)("男")])),_:1}),(0,s.Wm)(d,{name:"女"},{default:(0,s.w5)((()=>[(0,s.Uk)("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(r,{label:"手机号码",placeholder:"请输入手机号码",modelValue:n.userInfo.user_phone,"onUpdate:modelValue":t[4]||(t[4]=e=>n.userInfo.user_phone=e),rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"手机号格式不正确",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"邮箱",placeholder:"请输入邮箱",modelValue:n.userInfo.user_email,"onUpdate:modelValue":t[5]||(t[5]=e=>n.userInfo.user_email=e),rules:[{pattern:new RegExp(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/),message:"请输入正确的邮箱格式",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{label:"用户头像"},{input:(0,s.w5)((()=>[(0,s.Wm)(p,{"after-read":i.afterRead,modelValue:n.imageList,"onUpdate:modelValue":t[6]||(t[6]=e=>n.imageList=e),"max-count":1},null,8,["after-read","modelValue"])])),_:1}),(0,s._)("div",pa,[(0,s.Wm)(c,{onClick:i.formSubmit,loading:n.isSubmiting,"loading-type":"spinner","loading-text":"正在提交数据",type:"primary",size:"small",round:"",block:""},{default:(0,s.w5)((()=>[(0,s.Uk)("提交")])),_:1},8,["onClick","loading"])])])),_:1})])),_:1},512)])])),_:1})}var ma=a(2135),fa=a(8118),ga=a(1120),ha=a(2544),wa={name:"Register",inject:["baseURL"],data(){return{userInfo:{nickName:"",user_sex:"男",user_phone:"",user_email:"",password:"",confirmPwd:"",user_photo:""},isSubmiting:!1,imageList:[]}},methods:{validatePwd(){return""!==this.userInfo.confirmPwd&&(this.userInfo.confirmPwd==this.userInfo.password&&void 0)},formSubmit(){this.$refs.registerFormEl.validate().then((()=>{console.log("验证成功"),this.submitData()})).catch((()=>{console.log("验证失败")}))},submitData(){this.isSubmiting=!0,Ce.userInfo.add(this.userInfo).then((e=>{(0,ma.g)({type:"success",message:"注册成功",onClose:()=>{this.$router.replace({name:"Login"})}})})).catch((e=>{(0,ma.g)({type:"warning",message:"注册失败"})})).finally((()=>{this.isSubmiting=!1}))},async afterRead(e){console.log(e);let t=await Ce.userInfo.uploadUserPhoto(e.file);this.userInfo.user_photo=t,this.imageList=[{url:this.baseURL+t}]}},components:{Form:Me.l,Field:Te.g,CellGroup:$e.T,Button:Ee.z,Uploader:fa.Q,Radio:ga.Y,RadioGroup:ha.E}};const _a=(0,d.Z)(wa,[["render",ca]]);var Ia=_a;const ya={class:"flex-1 overflow-auto pb-[var(--van-submit-bar-height)]"},xa={class:"text-red-500"};function va(e,t,a,n,i,l){const r=(0,s.up)("title-bar"),d=(0,s.up)("Stepper"),u=(0,s.up)("Card"),p=(0,s.up)("Button"),c=(0,s.up)("SwipeCell"),m=(0,s.up)("List"),f=(0,s.up)("Tab"),g=(0,s.up)("AddressList"),h=(0,s.up)("Tabs"),_=(0,s.up)("SubmitBar"),I=(0,s.up)("my-loading"),y=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(y,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("购物车列表")])),_:1}),(0,s.Wm)(I,{isLoading:i.isFirstLoading},{default:(0,s.w5)((()=>[(0,s._)("div",ya,[(0,s.Wm)(h,{animated:"",active:i.selectedIndex,"onUpdate:active":t[1]||(t[1]=e=>i.selectedIndex=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{title:"购物车列表"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{"finished-text":"数据已经加载完毕",loading:i.isLoading,finished:l.finished,onLoad:l.loadNextShopCartPage},{default:(0,s.w5)((()=>[(0,s.Wm)(o.W3,{"leave-active-class":"animate__animated animate__bounceOutLeft"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.shopCartListData,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id},{right:(0,s.w5)((()=>[(0,s.Wm)(p,{type:"danger",square:"",class:"h-full",onClick:t=>l.deleteCurrentItem(e.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])),default:(0,s.w5)((()=>[(0,s.Wm)(u,{thumb:l.baseURL+e.foodInfo.food_img,title:e.foodInfo.food_name,price:e.foodInfo.price},{tags:(0,s.w5)((()=>[(0,s.Wm)(d,{onPlus:t=>l.plusOne(e.fid),onMinus:t=>l.minusOne(e.fid),class:"num-box",min:"1",max:"100",modelValue:e.count,"onUpdate:modelValue":t=>e.count=t,theme:"round","button-size":"16"},null,8,["onPlus","onMinus","modelValue","onUpdate:modelValue"])])),num:(0,s.w5)((()=>[(0,s._)("span",xa,"小计："+(0,w.zw)(e.foodInfo.price*e.count),1)])),_:2},1032,["thumb","title","price"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])),_:1}),(0,s.Wm)(f,{title:"地址列表"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{modelValue:i.chosenAddressId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.chosenAddressId=e),list:i.myAddressInfoList},null,8,["modelValue","list"])])),_:1})])),_:1},8,["active"])]),(0,s.Wm)(_,{price:l.totalMoney,"button-text":"提交订单",onSubmit:l.submitOrder},null,8,["price","onSubmit"])])),_:1},8,["isLoading"])])),_:1})}var La=a(8876),ba=a(2727),Ca=a(5191),ka=a(598),Ua=a(257),Da=a(1348),Wa=a(7779),Ba={name:"ShopCartList",inject:["baseURL"],data(){return{test:3,pageIndex:1,pageCount:0,shopCartListData:[],isLoading:!1,isFirstLoading:!0,myAddressInfoList:[],chosenAddressId:"",selectedIndex:0}},computed:{totalMoney(){let e=0;return this.shopCartListData.forEach((t=>{e+=t.count*t.foodInfo.price})),100*e},finished(){return this.pageIndex>=this.pageCount}},created(){this.getShopCartListByPage({pageIndex:this.pageIndex}),this.getMyAddressInfoList()},methods:{async getShopCartListByPage({pageIndex:e}){let t=await Ce.shopCart.getShopCartListByPage({pageIndex:e});this.pageCount=t.pageCount,this.shopCartListData.push(...t.listData),this.isFirstLoading=!1},async deleteCurrentItem(e){Q.V.confirm({title:"请确认",message:"你确定要删除这一项吗"}).then((async()=>{await Ce.shopCart.deleteMyShopCartFoodById(e);let t=this.shopCartListData.findIndex((t=>t.id===e));-1!=t&&this.shopCartListData.splice(t,1)})).catch((()=>{}))},plusOne(e){Ce.shopCart.addToShopCart({fid:e,count:1})},minusOne(e){Ce.shopCart.addToShopCart({fid:e,count:-1})},loadNextShopCartPage(){this.pageIndex++,this.getShopCartListByPage({pageIndex:this.pageIndex})},async getMyAddressInfoList(){let e=await Ce.addressInfo.getMyAddressInfoList(),t=e.map((e=>({id:e.id,name:e.person_name,tel:e.phone,address:e.address,tag:e.tag})));this.myAddressInfoList=t},async submitOrder(){if(this.chosenAddressId){let e={aid:this.chosenAddressId,foodList:this.shopCartListData.map((e=>({fid:e.fid,count:e.count})))};await Ce.orderInfo.submitOrder(e),J.F.success("订单提交成功"),this.$router.replace({name:"Order"})}else(0,ma.g)({type:"warning",message:"请先选择地址"}),this.selectedIndex=1}},components:{Tab:La.O,Tabs:ba.m,Card:Ca.Z,Stepper:ka.v,SwipeCell:Ua.Q,Button:Ee.z,SubmitBar:Da.J,List:oe.a,AddressList:Wa.s}};const Sa=(0,d.Z)(Ba,[["render",va],["__scopeId","data-v-360f6b40"]]);var Aa=Sa;const Fa={class:"flex-1 overflow-auto"},Va={class:"flex flex-row justify-end"},Pa={class:"box-border px-4 py-2"};function Oa(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Tag"),d=(0,s.up)("Button"),u=(0,s.up)("AddressList"),p=(0,s.up)("my-loading"),c=(0,s.up)("page-view");return(0,s.wg)(),(0,s.j4)(c,{class:"flex flex-col address-list-page"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("我的收货地址")])),_:1}),(0,s._)("div",Fa,[(0,s.Wm)(p,{isLoading:n.isLoading},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{list:n.list,onEdit:i.editCurrentAddress},{tag:(0,s.w5)((e=>[(0,s.Wm)(r,{type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,w.zw)(e.tag),1)])),_:2},1024)])),"item-bottom":(0,s.w5)((e=>[(0,s._)("div",Va,[(0,s.Wm)(d,{type:"danger",size:"mini",round:"",plain:"",onClick:t=>i.deleteCurrentAddress(e.id)},{default:(0,s.w5)((()=>[(0,s.Uk)("删除")])),_:2},1032,["onClick"])])])),_:1},8,["list","onEdit"])])),_:1},8,["isLoading"])]),(0,s._)("div",Pa,[(0,s.Wm)(d,{onClick:t[0]||(t[0]=t=>e.$router.push({name:"AddAddressInfo"})),type:"primary",block:"",round:"",plain:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("新增收货地址")])),_:1})])])),_:1})}var ja=a(3875),za={name:"AddressInfoList",data(){return{list:[],isLoading:!1}},created(){this.getMyAddressInfoList()},methods:{async getMyAddressInfoList(){this.isLoading=!0;let e=await Ce.addressInfo.getMyAddressInfoList(),t=e.map((e=>({id:e.id,name:e.person_name,tel:e.phone,address:e.address,tag:e.tag})));this.list=t,this.isLoading=!1},async deleteCurrentAddress(e){Q.V.confirm({title:"请确认",message:"你确定要删除这个地址吗？"}).then((async()=>{await Ce.addressInfo.deleteById(e);let t=this.list.findIndex((t=>t.id===e));-1!=t&&this.list.splice(t,1),J.F.success("删除成功")})).catch((()=>{}))},editCurrentAddress(e,t){console.log(e),this.$router.push({name:"EditAddressInfo",params:{id:e.id}})}},components:{Button:Ee.z,AddressList:Wa.s,Tag:ja.V}};const Ra=(0,d.Z)(za,[["render",Oa],["__scopeId","data-v-1ca8b6d0"]]);var Ma=Ra;const Ta={class:"flex-1 overflow-auto"},$a={class:"px-2 py-3"};function Ea(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("CellGroup"),p=(0,s.up)("Form"),c=(0,s.up)("page-view"),m=(0,s.up)("Cascader"),f=(0,s.up)("Popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("新增收货地址")])),_:1}),(0,s._)("div",Ta,[(0,s.Wm)(p,{class:"mt-4",ref:"addressInfoFormEl"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:n.addressInfoData.person_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.addressInfoData.person_name=e),label:"姓名",placeholder:"请输入收件人姓名",rules:[{required:!0,message:"收件人姓名不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>n.addressInfoData.phone=e),label:"电话",placeholder:"请输入收件人电话",rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"电话号码格式不正确",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.province_city_county,"onUpdate:modelValue":t[2]||(t[2]=e=>n.addressInfoData.province_city_county=e),label:"地区",placeholder:"点击选择地址",readonly:"","is-link":"",onClick:t[3]||(t[3]=e=>n.isShowPopup=!0),rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.detailAddress,"onUpdate:modelValue":t[4]||(t[4]=e=>n.addressInfoData.detailAddress=e),label:"详细地址",placeholder:"街道门牌信息",rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.tag,"onUpdate:modelValue":t[5]||(t[5]=e=>n.addressInfoData.tag=e),label:"标签",placeholder:"给地址起个标签吧",rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s._)("div",$a,[(0,s.Wm)(d,{type:"primary",round:"",block:"",size:"small",onClick:i.submitForm},{default:(0,s.w5)((()=>[(0,s.Uk)("保存")])),_:1},8,["onClick"])])])),_:1})])),_:1},512)])])),_:1}),(0,s.Wm)(f,{show:n.isShowPopup,"onUpdate:show":t[6]||(t[6]=e=>n.isShowPopup=e),position:"bottom",teleport:"body"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"请选择所在地区",options:n.cascaderOptions,onFinish:i.cascaderFinish},null,8,["options","onFinish"])])),_:1},8,["show"])],64)}var qa=a(6305),Za=a(9723),Na={name:"AddAddressInfo",data(){return{isShowPopup:!1,cascaderOptions:[],addressInfoData:{phone:"",person_name:"",tag:"",address:"",province_city_county:"",detailAddress:""}}},created(){this.getAllList()},methods:{async getAllList(){let e=await Ce.area.getAllList(),t=e.filter((e=>1===e.level)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>2===e.level&&e.parentId===t.id)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>3===e.level&&e.parentId===t.id)).map((e=>({text:e.areaName,value:e.id})))})))})));this.cascaderOptions=t},cascaderFinish({selectedOptions:e}){this.addressInfoData.province_city_county=e.map((e=>e.text)).join(" "),this.isShowPopup=!1},async submitForm(){this.$refs.addressInfoFormEl.validate().then((()=>{this.addAddress()})).catch((()=>{(0,ma.g)({type:"warning",message:"请正确填写内容"})}))},async addAddress(){this.addressInfoData.address=this.addressInfoData.province_city_county+" "+this.addressInfoData.detailAddress;let e=await Ce.addressInfo.addAddress(this.addressInfoData);console.log(e),J.F.success("新增地址成功"),this.$router.back()}},components:{Form:Me.l,CellGroup:$e.T,Field:Te.g,Button:Ee.z,Popup:qa.G,Cascader:Za.v}};const Ha=(0,d.Z)(Na,[["render",Ea]]);var Ya=Ha;const Ga={class:"flex-1 overflow-auto"},Ka={class:"px-2 py-3"};function Qa(e,t,a,o,n,i){const l=(0,s.up)("title-bar"),r=(0,s.up)("Field"),d=(0,s.up)("Button"),u=(0,s.up)("CellGroup"),p=(0,s.up)("Form"),c=(0,s.up)("page-view"),m=(0,s.up)("Cascader"),f=(0,s.up)("Popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,{class:"flex flex-col"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{"show-back":!0},{default:(0,s.w5)((()=>[(0,s.Uk)("编辑收货地址")])),_:1}),(0,s._)("div",Ga,[(0,s.Wm)(p,{class:"mt-4",ref:"addressInfoFormEl"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:n.addressInfoData.person_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.addressInfoData.person_name=e),label:"姓名",placeholder:"请输入收件人姓名",rules:[{required:!0,message:"收件人不能为空",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>n.addressInfoData.phone=e),label:"电话",placeholder:"请输入收件人电话",rules:[{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"电话号码格式不正确",trigger:"onBlur"}]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.province_city_county,"onUpdate:modelValue":t[2]||(t[2]=e=>n.addressInfoData.province_city_county=e),label:"地区",placeholder:"点击选择地址",readonly:"","is-link":"",onClick:t[3]||(t[3]=e=>n.isShowPopup=!0),rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.detailAddress,"onUpdate:modelValue":t[4]||(t[4]=e=>n.addressInfoData.detailAddress=e),label:"详细地址",placeholder:"街道门牌信息",rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:n.addressInfoData.tag,"onUpdate:modelValue":t[5]||(t[5]=e=>n.addressInfoData.tag=e),label:"标签",placeholder:"给地址起个标签吧",rules:[{required:!0,message:"请选择地址",trigger:"onBlur"}]},null,8,["modelValue"]),(0,s._)("div",Ka,[(0,s.Wm)(d,{type:"primary",round:"",block:"",size:"small",onClick:i.submitForm},{default:(0,s.w5)((()=>[(0,s.Uk)("保存")])),_:1},8,["onClick"])])])),_:1})])),_:1},512)])])),_:1}),(0,s.Wm)(f,{show:n.isShowPopup,"onUpdate:show":t[6]||(t[6]=e=>n.isShowPopup=e),position:"bottom",teleport:"body"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"请选择所在地区",options:n.cascaderOptions,onFinish:i.cascaderFinish},null,8,["options","onFinish"])])),_:1},8,["show"])],64)}var Ja={name:"EditAddressInfo",data(){return{isShowPopup:!1,cascaderOptions:[],addressInfoData:{id:"",phone:"",person_name:"",tag:"",address:"",province_city_county:"",detailAddress:""}}},created(){let e=this.$route.params.id;this.findById(e),this.addressInfoData.id=e,this.getAllList()},methods:{async findById(e){let t=await Ce.addressInfo.findById(e);console.log(t),this.addressInfoData.phone=t.phone,this.addressInfoData.person_name=t.person_name,this.addressInfoData.tag=t.tag,this.addressInfoData.id=t.id,this.addressInfoData.address=t.address;let a=t.address.split(" ");this.addressInfoData.province_city_county=a.slice(0,3).join(" "),this.addressInfoData.detailAddress=a.pop()},async getAllList(){let e=await Ce.area.getAllList(),t=e.filter((e=>1===e.level)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>2===e.level&&e.parentId===t.id)).map((t=>({text:t.areaName,value:t.id,children:e.filter((e=>3===e.level&&e.parentId===t.id)).map((e=>({text:e.areaName,value:e.id})))})))})));this.cascaderOptions=t},cascaderFinish({selectedOptions:e}){this.addressInfoData.province_city_county=e.map((e=>e.text)).join(" "),this.isShowPopup=!1},async submitForm(){this.$refs.addressInfoFormEl.validate().then((()=>{this.editAddressInfo()})).catch((()=>{(0,ma.g)({type:"warning",message:"请正确填写内容"})}))},async editAddressInfo(){this.addressInfoData.address=this.addressInfoData.province_city_county+" "+this.addressInfoData.detailAddress,await Ce.addressInfo.update(this.addressInfoData),J.F.success("修改成功"),this.$router.replace({name:"AddressInfoList"})}},components:{Form:Me.l,CellGroup:$e.T,Field:Te.g,Button:Ee.z,Popup:qa.G,Cascader:Za.v}};const Xa=(0,d.Z)(Ja,[["render",Qa]]);var eo=Xa;const to=(0,c.p7)({history:(0,c.r5)(),routes:[{path:"/",redirect:{name:"ChooseFood"}},{path:"/Home",name:"Home",component:A,children:[{path:"ChooseFood",name:"ChooseFood",component:ut},{path:"Order",name:"Order",component:St},{path:"Category",name:"Category",component:Qt},{path:"My",name:"My",component:da}]},{path:"/FoodDetail/:id",name:"FoodDetail",component:Pe},{path:"/Login",name:"Login",component:Ne},{path:"/Register",name:"Register",component:Ia},{path:"/ShopCartList",name:"ShopCartList",component:Aa,meta:{requireAuth:!0}},{path:"/AddressInfoList",name:"AddressInfoList",component:Ma,meta:{requireAuth:!0}},{path:"/AddAddressInfo",name:"AddAddressInfo",component:Ya,meta:{requireAuth:!0}},{path:"/EditAddressInfo/:id",name:"EditAddressInfo",component:eo,meta:{requireAuth:!0}}]});to.beforeEach(((e,t,a)=>{!0===e.meta.requireAuth?h.getters.loginUserInfo?a():a({name:"Login"}):a()}));var ao=to,oo=(a(5177),a(5110),a(1738));const so={class:"page-view"};function no(e,t,a,o,n,i){return(0,s.wg)(),(0,s.iD)("div",so,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var io={name:"PageView"};const lo=(0,d.Z)(io,[["render",no],["__scopeId","data-v-046b7b73"]]);var ro=lo;const uo=e=>((0,s.dD)("data-v-6e6f43e9"),e=e(),(0,s.Cn)(),e),po={class:"title-bar"},co=uo((()=>(0,s._)("span",{class:"iconfont icon-fanhui"},null,-1))),mo={class:"right-menu"};function fo(e,t,a,o,n,i){return(0,s.wg)(),(0,s.iD)("div",po,[a.showBack?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"left-back",onClick:t[0]||(t[0]=t=>e.$router.back())},[co,(0,s.Uk)(" 返回 ")])):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"default",{},void 0,!0),(0,s._)("div",mo,[(0,s.WI)(e.$slots,"menu",{},void 0,!0)])])}var go={name:"TitleBar",props:{showBack:{type:Boolean,default:!1}}};const ho=(0,d.Z)(go,[["render",fo],["__scopeId","data-v-6e6f43e9"]]);var wo=ho;const _o={key:0,class:"flex flex-row justify-center py-[5px]"};function Io(e,t,a,o,n,i){const l=(0,s.up)("Loading");return a.isLoading?((0,s.wg)(),(0,s.iD)("div",_o,[(0,s.Wm)(l,{type:"spinner",color:"#1989fa"},{default:(0,s.w5)((()=>[(0,s.Uk)("正在加载中···")])),_:1})])):(0,s.WI)(e.$slots,"default",{key:1})}var yo={name:"MyLoading",props:{isLoading:{type:Boolean,default:!0}},components:{Loading:Ht.g}};const xo=(0,d.Z)(yo,[["render",Io]]);var vo=xo;const Lo=(0,o.ri)(p);Lo.component("page-view",ro),Lo.component("title-bar",wo),Lo.component("my-loading",vo),Lo.provide("baseURL","http://www.softeem.xin:9544"),Lo.use(oo.J,{lazyComponent:!0,loading:a(265),error:a(9235)}),Lo.use(ao),Lo.use(h),Lo.mount("#app")},5177:function(){const e=()=>{let e=document.documentElement.clientWidth;e>750&&(e=750),document.documentElement.style.fontSize=e/375*100+"px"};document.addEventListener("DOMContentLoaded",e),window.addEventListener("resize",e)},9472:function(e,t,a){"use strict";e.exports=a.p+"media/camera.f5159b86.mp3"},9235:function(e,t,a){"use strict";e.exports=a.p+"img/error.fc5079b5.jpg"},265:function(e,t,a){"use strict";e.exports=a.p+"img/loading.1895ab82.gif"}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,n){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],n=e[u][2];for(var l=!0,r=0;r<o.length;r++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[r])}))?o.splice(r--,1):(l=!1,n<i&&(i=n));if(l){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p=""}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,i=o[0],l=o[1],r=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(r)var u=r(a)}for(t&&t(o);d<i.length;d++)n=i[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self["webpackChunk_110701_demo2"]=self["webpackChunk_110701_demo2"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(2691)}));o=a.O(o)})();
//# sourceMappingURL=index.3e4d2374.js.map